!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/material/input"),require("@angular/material/select"),require("@angular/material/checkbox"),require("@angular/material/slider"),require("@angular/material/slide-toggle"),require("@angular/material/icon"),require("@angular/material/button"),require("@angular/material/datepicker"),require("@covalent/core/file"),require("@angular/core"),require("@angular/forms"),require("@angular/cdk/portal"),require("@covalent/core/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@covalent/dynamic-forms",["exports","@angular/common","@angular/material/input","@angular/material/select","@angular/material/checkbox","@angular/material/slider","@angular/material/slide-toggle","@angular/material/icon","@angular/material/button","@angular/material/datepicker","@covalent/core/file","@angular/core","@angular/forms","@angular/cdk/portal","@covalent/core/common","rxjs","rxjs/operators"],t):t((e.covalent=e.covalent||{},e.covalent["dynamic-forms"]={}),e.ng.common,e.ng.material.input,e.ng.material.select,e.ng.material.checkbox,e.ng.material.slider,e.ng.material["slide-toggle"],e.ng.material.icon,e.ng.material.button,e.ng.material.datepicker,e.covalent.core.file,e.ng.core,e.ng.forms,e.ng.cdk.portal,e.covalent.core.common,e.rxjs,e.rxjs.operators)}(this,function(e,t,n,r,i,a,o,l,m,s,d,c,p,u,f,h,y){"use strict";var g=function(){function e(){this.label="",this.hint="",this.type=undefined,this.required=undefined,this.name="",this.min=undefined,this.max=undefined,this.minLength=undefined,this.maxLength=undefined,this.errorMessageTemplate=undefined}return e.decorators=[{type:c.Component,args:[{selector:"td-dynamic-input",template:'<div class="td-dynamic-input-wrapper">\n  <mat-form-field class="td-dynamic-input-field">\n    <input #elementInput\n            matInput\n            [formControl]="control"\n            [placeholder]="label"\n            [type]="type"\n            [required]="required"\n            [attr.name]="name"\n            [attr.min]="min"\n            [attr.max]="max"\n            [attr.minLength]="minLength"\n            [attr.maxLength]="maxLength"/>\n    <mat-hint>{{hint}}</mat-hint>\n    <mat-error>\n      <ng-template\n        [ngTemplateOutlet]="errorMessageTemplate"\n        [ngTemplateOutletContext]="{control: control, errors: control?.errors}">\n      </ng-template>\n    </mat-error>\n  </mat-form-field>\n</div>\n',styles:[".td-dynamic-input-wrapper{-ms-flex-direction:row;flex-direction:row;display:-ms-flexbox;display:flex;box-sizing:border-box}.td-dynamic-input-wrapper .td-dynamic-input-field{-ms-flex:1;flex:1;box-sizing:border-box}"]}]}],e}(),x=function(){function e(){this.required=undefined,this.label="",this.name="",this.hint="",this.errorMessageTemplate=undefined}return e.prototype._handlefileDrop=function(e){this.control.setValue(e)},e.decorators=[{type:c.Component,args:[{selector:"td-dynamic-file-input",template:'<div class="td-dynamic-file-input-wrapper">\n  <mat-form-field tdFileDrop\n                  class="td-dynamic-file-input-field"\n                  floatLabel="never"\n                  [disabled]="control?.disabled"\n                  (fileDrop)="_handlefileDrop($event)"\n                  (click)="!control?.disabled && fileInput.inputElement.click()"\n                  (keyup.enter)="!control?.disabled && fileInput.inputElement.click()"\n                  (keyup.delete)="fileInput.clear()"\n                  (keyup.backspace)="fileInput.clear()">\n    <input matInput\n          [value]="control?.value?.name"\n          [placeholder]="label"\n          [attr.name]="name"\n          [disabled]="control?.disabled"\n          readonly/>\n    <mat-hint>{{hint}}</mat-hint>\n    <mat-error>\n      <ng-template\n        [ngTemplateOutlet]="errorMessageTemplate"\n        [ngTemplateOutletContext]="{control: control, errors: control?.errors}">\n      </ng-template>\n    </mat-error>\n  </mat-form-field>\n  <button mat-icon-button *ngIf="control.value" (click)="fileInput.clear()" (keyup.enter)="fileInput.clear()">\n    <mat-icon>cancel</mat-icon>\n  </button>\n  <td-file-input class="td-file-input"\n                  #fileInput\n                  [formControl]="control">\n    <mat-icon>folder</mat-icon>\n    <span>{{ label }}</span>\n  </td-file-input>\n</div>',styles:[".td-dynamic-file-input-wrapper{-ms-flex-direction:row;flex-direction:row;display:-ms-flexbox;display:flex;box-sizing:border-box}.td-dynamic-file-input-wrapper .td-dynamic-file-input-field{-ms-flex:1;flex:1;box-sizing:border-box}.td-file-input{margin-left:10px}"]}]}],e}(),b=function(){function e(){this.label="",this.hint="",this.name="",this.required=undefined,this.errorMessageTemplate=undefined}return e.decorators=[{type:c.Component,args:[{selector:"td-dynamic-textarea",template:'<div class="td-dynamic-textarea-wrapper">\n  <mat-form-field class="td-dynamic-textarea-field">\n    <textarea #elementInput\n            matInput\n            [formControl]="control"\n            [placeholder]="label"\n            [required]="required"\n            [attr.name]="name"\n            rows="4">\n    </textarea>\n    <mat-hint>{{hint}}</mat-hint>\n    <mat-error>\n      <ng-template\n        [ngTemplateOutlet]="errorMessageTemplate"\n        [ngTemplateOutletContext]="{control: control, errors: control?.errors}">\n      </ng-template>\n    </mat-error>\n  </mat-form-field>\n</div>',styles:[".td-dynamic-textarea-wrapper{-ms-flex-direction:row;flex-direction:row;display:-ms-flexbox;display:flex;box-sizing:border-box}.td-dynamic-textarea-wrapper .td-dynamic-textarea-field{-ms-flex:1;flex:1;box-sizing:border-box}"]}]}],e}(),v=function(){function e(){this.label="",this.name="",this.hint="",this.required=!1}return e.decorators=[{type:c.Component,args:[{selector:"td-dynamic-slide-toggle",template:'<div class="td-dynamic-slide-toggle-wrapper">\n  <mat-slide-toggle [formControl]="control"\n                    [attr.name]="name"\n                    [required]="required">\n    {{label}}\n  </mat-slide-toggle>\n  <span class="mat-hint td-dynamic-element-hint">{{hint}}</span>\n</div>',styles:[""]}]}],e}(),_=function(){function e(){this.label="",this.name="",this.hint="",this.required=!1}return e.decorators=[{type:c.Component,args:[{selector:"td-dynamic-checkbox",template:'<div class="td-dynamic-checkbox-wrapper">\n  <mat-checkbox [formControl]="control"\n                [name]="name"\n                [required]="required">\n    {{label}}\n  </mat-checkbox>\n  <span class="mat-hint td-dynamic-element-hint">{{hint}}</span>\n</div>',styles:[""]}]}],e}(),C=function(){function e(e){this._changeDetectorRef=e,this.label="",this.required=undefined,this.name="",this.hint="",this.min=undefined,this.max=undefined}return e.prototype._handleBlur=function(){var e=this;setTimeout(function(){e._changeDetectorRef.markForCheck()})},e.decorators=[{type:c.Component,args:[{selector:"td-dynamic-slider",template:'<div class="td-dynamic-slider-wrapper mat-form-field mat-form-field-can-float mat-form-field-should-float"\n      [class.mat-focused]="slider._isActive">\n  <span class="mat-form-field-label-wrapper">\n    <label class="mat-form-field-label mat-primary td-slider-label">\n      {{label}}\n      <span *ngIf="required && !control?.disabled" class="mat-form-field-required-marker">*</span>\n    </label>\n  </span>\n  <div class="td-dynamic-slider-field">\n    <mat-slider #slider\n                class="td-dynamic-slider"\n                [formControl]="control"\n                [attr.name]="name"\n                [min]="min"\n                [max]="max"\n                thumbLabel\n                tickInterval="auto"\n                [required]="required"\n                (blur)="_handleBlur()">\n    </mat-slider>\n  </div>  \n  <span class="mat-hint td-dynamic-element-hint">{{hint}}</span>\n</div>',styles:[":host .td-dynamic-slider-wrapper{display:block}.td-dynamic-slider-field{position:relative;-ms-flex-direction:row;flex-direction:row;display:-ms-flexbox;display:flex;box-sizing:border-box}.td-dynamic-slider-field .td-dynamic-slider{-ms-flex:1;flex:1}"]}]}],e.ctorParameters=function(){return[{type:c.ChangeDetectorRef}]},e}(),w=function(){function e(){this.label="",this.hint="",this.name="",this.required=undefined,this.selections=undefined,this.multiple=undefined,this.errorMessageTemplate=undefined}return e.decorators=[{type:c.Component,args:[{selector:"td-dynamic-select",template:'<div class="td-dynamic-select-wrapper">\n  <mat-form-field class="td-dynamic-select-field">\n    <mat-select [formControl]="control"\n                [placeholder]="label"\n                [required]="required"\n                [attr.name]="name"\n                [multiple]="multiple">\n      <mat-option *ngFor="let selection of selections" [value]="selection.value || selection">{{selection.label || selection}}</mat-option>\n    </mat-select>\n    <mat-hint>{{hint}}</mat-hint>\n    <mat-error>\n      <ng-template\n        [ngTemplateOutlet]="errorMessageTemplate"\n        [ngTemplateOutletContext]="{control: control, errors: control?.errors}">\n      </ng-template>\n    </mat-error>\n  </mat-form-field>\n</div>\n',styles:[".td-dynamic-select-wrapper{-ms-flex-direction:row;flex-direction:row;display:-ms-flexbox;display:flex;box-sizing:border-box}.td-dynamic-select-wrapper .td-dynamic-select-field{-ms-flex:1;flex:1;box-sizing:border-box}"]}]}],e}(),T=function(){function e(){this.label="",this.hint="",this.name="",this.type=undefined,this.required=undefined,this.min=undefined,this.max=undefined,this.errorMessageTemplate=undefined}return e.decorators=[{type:c.Component,args:[{selector:"td-dynamic-datepicker",template:'<div class="td-dynamic-datepicker-wrapper">\n  <mat-form-field class="td-dynamic-datepicker-field">\n    <input #elementInput\n            matInput\n            [matDatepicker]="dynamicDatePicker"\n            [formControl]="control"\n            [placeholder]="label"\n            [required]="required"\n            [name]="name"\n            [min]="min"\n            [max]="max"/>\n    <mat-hint>{{hint}}</mat-hint>\n    <mat-error>\n      <ng-template\n        [ngTemplateOutlet]="errorMessageTemplate"\n        [ngTemplateOutletContext]="{control: control, errors: control?.errors}">\n      </ng-template>\n    </mat-error>\n    <mat-datepicker-toggle matSuffix [for]="dynamicDatePicker"></mat-datepicker-toggle>\n    <mat-datepicker #dynamicDatePicker></mat-datepicker>\n  </mat-form-field>\n</div>\n',styles:[".td-dynamic-datepicker-wrapper{-ms-flex-direction:row;flex-direction:row;display:-ms-flexbox;display:flex;box-sizing:border-box}.td-dynamic-datepicker-wrapper .td-dynamic-datepicker-field{-ms-flex:1;flex:1;box-sizing:border-box}"]}]}],e}(),D={Text:"text",Boolean:"boolean",Number:"number",Array:"array",Date:"date"},k={Input:"input",Datepicker:"datepicker",Password:"password",Textarea:"textarea",Slider:"slider",SlideToggle:"slide-toggle",Checkbox:"checkbox",Select:"select",FileInput:"file-input"},F=/^[^0-9][^\@]*$/,E=function(){function e(){}return e.prototype.validateDynamicElementName=function(e){if(!F.test(e))throw new Error('Dynamic element name: "${name}" is not valid.')},e.prototype.getDynamicElement=function(e){switch(e){case D.Text:case D.Number:case k.Input:case k.Password:return g;case k.Textarea:return b;case D.Boolean:case k.SlideToggle:return v;case k.Checkbox:return _;case k.Slider:return C;case D.Array:case k.Select:return w;case k.FileInput:return x;case k.Datepicker:case D.Date:return T;default:throw new Error("Error: type "+e+" does not exist or not supported.")}},e.prototype.createFormControl=function(e){var t=this.createValidators(e);return new p.FormControl({value:e["default"],disabled:e.disabled},t)},e.prototype.createValidators=function(e){var t;return e.required&&(t=p.Validators.required),(e.max||0===e.max)&&(t=p.Validators.compose([t,p.Validators.max(parseFloat(e.max))])),(e.min||0===e.min)&&(t=p.Validators.compose([t,p.Validators.min(parseFloat(e.min))])),(e.maxLength||0===e.maxLength)&&(t=p.Validators.compose([t,p.Validators.maxLength(parseFloat(e.maxLength))])),(e.minLength||0===e.minLength)&&(t=p.Validators.compose([t,p.Validators.minLength(parseFloat(e.minLength))])),e.validators&&e.validators.forEach(function(e){t=p.Validators.compose([t,e.validator])}),t},e.decorators=[{type:c.Injectable}],e}();function M(e){return e||new E}var I={provide:E,deps:[[new c.Optional,new c.SkipSelf,E]],useFactory:M},q=function(e,t){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function O(e,t){function n(){this.constructor=e}q(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var R=function N(e){this._changeDetectorRef=e},S=f.mixinControlValueAccessor(R),L=function(n){function e(e,t){return n.call(this,e,t)||this}return O(e,n),e.decorators=[{type:c.Directive,args:[{selector:"[tdDynamicFormsError]ng-template"}]}],e.ctorParameters=function(){return[{type:c.TemplateRef},{type:c.ViewContainerRef}]},e.propDecorators={tdDynamicFormsError:[{type:c.Input}]},e}(u.TemplatePortalDirective),P=function(){function e(e){this.viewContainer=e}return e.decorators=[{type:c.Directive,args:[{selector:"[tdDynamicContainer]"}]}],e.ctorParameters=function(){return[{type:c.ViewContainerRef}]},e}(),V=function(i){function e(e,t,n){var r=i.call(this,n)||this;return r._componentFactoryResolver=e,r._dynamicFormsService=t,r.label="",r.hint="",r.name="",r.type=undefined,r.required=undefined,r.min=undefined,r.max=undefined,r.minLength=undefined,r.maxLength=undefined,r.selections=undefined,r.multiple=undefined,r.errorMessageTemplate=undefined,r}return O(e,i),Object.defineProperty(e.prototype,"maxAttr",{get:function(){return this.max},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minAttr",{get:function(){return this.min},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.type instanceof c.Type?this.type:this._dynamicFormsService.getDynamicElement(this.type),t=this._componentFactoryResolver.resolveComponentFactory(e).create(this.childElement.viewContainer.injector);this.childElement.viewContainer.insert(t.hostView),this._instance=t.instance,this._instance.control=this.dynamicControl,this._instance.label=this.label,this._instance.hint=this.hint,this._instance.name=this.name,this._instance.type=this.type,this._instance.value=this.value,this._instance.required=this.required,this._instance.min=this.min,this._instance.max=this.max,this._instance.minLength=this.minLength,this._instance.maxLength=this.maxLength,this._instance.selections=this.selections,this._instance.multiple=this.multiple,this._instance.errorMessageTemplate=this.errorMessageTemplate},e.prototype.ngOnChanges=function(e){if(this._instance)for(var t in e)this._instance[t]=e[t].currentValue},e.decorators=[{type:c.Component,args:[{providers:[E,{provide:p.NG_VALUE_ACCESSOR,useExisting:c.forwardRef(function(){return e}),multi:!0}],selector:"td-dynamic-element",template:"<div tdDynamicContainer></div>"}]}],e.ctorParameters=function(){return[{type:c.ComponentFactoryResolver},{type:E},{type:c.ChangeDetectorRef}]},e.propDecorators={dynamicControl:[{type:c.Input}],label:[{type:c.Input}],hint:[{type:c.Input}],name:[{type:c.Input}],type:[{type:c.Input}],required:[{type:c.Input}],min:[{type:c.Input}],max:[{type:c.Input}],minLength:[{type:c.Input}],maxLength:[{type:c.Input}],selections:[{type:c.Input}],multiple:[{type:c.Input}],errorMessageTemplate:[{type:c.Input}],childElement:[{type:c.ViewChild,args:[P]}],maxAttr:[{type:c.HostBinding,args:["attr.max"]}],minAttr:[{type:c.HostBinding,args:["attr.min"]}]},e}(S),j=function(){function e(e,t,n){this._formBuilder=e,this._dynamicFormsService=t,this._changeDetectorRef=n,this._renderedElements=[],this._templateMap=new Map,this._destroy$=new h.Subject,this._destroyControl$=new h.Subject,this.dynamicForm=this._formBuilder.group({})}return Object.defineProperty(e.prototype,"elements",{get:function(){return this._renderedElements},set:function(e){this._elements=e||[],this._rerenderElements()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this.dynamicForm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return!!this.dynamicForm&&this.dynamicForm.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.dynamicForm?this.dynamicForm.value:{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){if(this.dynamicForm){var e={};for(var t in this.dynamicForm.controls)e[t]=this.dynamicForm.controls[t].errors;return e}return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return this.dynamicForm?this.dynamicForm.controls:{}},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){this._updateErrorTemplates()},e.prototype.ngOnDestroy=function(){this._destroy$.next(),this._destroy$.complete(),this._destroyControl$.complete()},e.prototype.refresh=function(){this._rerenderElements(),this._updateErrorTemplates()},e.prototype.getErrorTemplateRef=function(e){return this._templateMap.get(e)},e.prototype._updateErrorTemplates=function(){this._templateMap=new Map;for(var e=0;e<this._errorTemplates.toArray().length;e++)this._templateMap.set(this._errorTemplates.toArray()[e].tdDynamicFormsError,this._errorTemplates.toArray()[e].templateRef)},e.prototype._rerenderElements=function(){var n=this;this._clearRemovedElements(),this._renderedElements=[];var r=[];this._elements.forEach(function(e){if(n._dynamicFormsService.validateDynamicElementName(e.name),-1<r.indexOf(e.name))throw new Error('Dynamic element name: "'+e.name+'" is duplicated');r.push(e.name);var t=n.dynamicForm.get(e.name);t?(t.setValue(e["default"]),t.markAsPristine(),t.markAsUntouched(),e.disabled?t.disable():t.enable(),t.setValidators(n._dynamicFormsService.createValidators(e))):(n.dynamicForm.addControl(e.name,n._dynamicFormsService.createFormControl(e)),n._subscribeToControlStatusChanges(e.name)),n._renderedElements.push(Object.assign({},e))}),this._changeDetectorRef.detectChanges(),h.timer().toPromise().then(function(){n._changeDetectorRef.markForCheck()})},e.prototype._clearRemovedElements=function(){for(var t=this,e=0;e<this._renderedElements.length;e++)for(var n=0;n<this._elements.length;n++)if(this._renderedElements[e].name===this._elements[n].name){delete this._renderedElements[e];break}this._renderedElements.forEach(function(e){t._destroyControl$.next(e.name),t.dynamicForm.removeControl(e.name)})},e.prototype._subscribeToControlStatusChanges=function(t){var e=this,n=this.controls[t],r=this._destroyControl$.pipe(y.filter(function(e){return e===t}));n.statusChanges.pipe(y.takeUntil(this._destroy$),y.takeUntil(r)).subscribe(function(){e._changeDetectorRef.markForCheck()})},e.decorators=[{type:c.Component,args:[{selector:"td-dynamic-forms",template:'<form [formGroup]="dynamicForm" novalidate>\n  <div class="td-dynamic-form-wrapper">\n    <ng-template let-element ngFor [ngForOf]="elements">\n      <div class="td-dynamic-element-wrapper"\n          [style.max-width.%]="element.flex ? element.flex : 100"\n          [style.flex]="\'1 1 \' + (element.flex ? element.flex : 100) + \'%\'"\n          [style.-ms-flex]="\'1 1 \' + (element.flex ? element.flex : 100) + \'%\'"\n          [style.-webkit-box-flex]="1">\n        <td-dynamic-element\n          #dynamicElement\n          *ngIf="dynamicForm.controls[element.name]"\n          [formControlName]="element.name"\n          [dynamicControl]="dynamicForm.controls[element.name]"\n          [id]="element.name"\n          [name]="element.name"\n          [label]="element.label || element.name"\n          [hint]="element.hint"\n          [type]="element.type"\n          [required]="element.required"\n          [min]="element.min"\n          [max]="element.max"\n          [minLength]="element.minLength"\n          [maxLength]="element.maxLength"\n          [selections]="element.selections"\n          [multiple]="element.multiple"\n          [errorMessageTemplate]="getErrorTemplateRef(element.name)">\n        </td-dynamic-element>\n      </div>\n    </ng-template>\n  </div>\n  <ng-content></ng-content>\n</form>\n',changeDetection:c.ChangeDetectionStrategy.OnPush,styles:[".td-dynamic-form-wrapper{-ms-flex-wrap:wrap;flex-wrap:wrap;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-line-pack:center;align-content:center;max-width:100%;-ms-flex-pack:start;justify-content:start}.td-dynamic-form-wrapper ::ng-deep .mat-form-field-infix{width:auto}.td-dynamic-form-wrapper ::ng-deep .td-dynamic-element-hint{font-size:75%;display:block}.td-dynamic-form-wrapper .td-dynamic-element-wrapper{max-height:100%;box-sizing:border-box;position:relative;padding:4px 4px 8px}"]}]}],e.ctorParameters=function(){return[{type:p.FormBuilder},{type:E},{type:c.ChangeDetectorRef}]},e.propDecorators={_errorTemplates:[{type:c.ContentChildren,args:[L]}],elements:[{type:c.Input,args:["elements"]}]},e}(),A=[j,V,P,L],z=[g,x,b,v,_,C,w,T],B=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{declarations:[A,z],imports:[t.CommonModule,p.ReactiveFormsModule,n.MatInputModule,r.MatSelectModule,i.MatCheckboxModule,a.MatSliderModule,o.MatSlideToggleModule,l.MatIconModule,m.MatButtonModule,s.MatDatepickerModule,f.CovalentCommonModule,d.CovalentFileModule],exports:[A,z],providers:[I],entryComponents:[z]}]}],e}();e.CovalentDynamicFormsModule=B,e.TdDynamicFormsComponent=j,e.TdDynamicElementBase=R,e._TdDynamicElementMixinBase=S,e.TdDynamicFormsErrorTemplate=L,e.TdDynamicElementDirective=P,e.TdDynamicElementComponent=V,e.DYNAMIC_FORMS_PROVIDER_FACTORY=M,e.TdDynamicType=D,e.TdDynamicElement=k,e.DYNAMIC_ELEMENT_NAME_REGEX=F,e.TdDynamicFormsService=E,e.DYNAMIC_FORMS_PROVIDER=I,e.TdDynamicTextareaComponent=b,e.TdDynamicSliderComponent=C,e.TdDynamicSlideToggleComponent=v,e.TdDynamicSelectComponent=w,e.TdDynamicInputComponent=g,e.TdDynamicFileInputComponent=x,e.TdDynamicDatepickerComponent=T,e.TdDynamicCheckboxComponent=_,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=covalent-dynamic-forms.umd.min.js.map