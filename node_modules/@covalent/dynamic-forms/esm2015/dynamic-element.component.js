/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import { Component, Directive, Input, HostBinding, TemplateRef, ChangeDetectorRef, Type } from '@angular/core';
import { ViewChild, ViewContainerRef } from '@angular/core';
import { ComponentFactoryResolver, forwardRef } from '@angular/core';
import { NG_VALUE_ACCESSOR, FormControl } from '@angular/forms';
import { TemplatePortalDirective } from '@angular/cdk/portal';
import { mixinControlValueAccessor } from '@covalent/core/common';
import { TdDynamicFormsService } from './services/dynamic-forms.service';
export class TdDynamicElementBase {
    /**
     * @param {?} _changeDetectorRef
     */
    constructor(_changeDetectorRef) {
        this._changeDetectorRef = _changeDetectorRef;
    }
}
if (false) {
    /** @type {?} */
    TdDynamicElementBase.prototype._changeDetectorRef;
}
/* tslint:disable-next-line */
/** @type {?} */
export const _TdDynamicElementMixinBase = mixinControlValueAccessor(TdDynamicElementBase);
export class TdDynamicFormsErrorTemplate extends TemplatePortalDirective {
    /**
     * @param {?} templateRef
     * @param {?} viewContainerRef
     */
    constructor(templateRef, viewContainerRef) {
        super(templateRef, viewContainerRef);
    }
}
TdDynamicFormsErrorTemplate.decorators = [
    { type: Directive, args: [{ selector: '[tdDynamicFormsError]ng-template' },] }
];
/** @nocollapse */
TdDynamicFormsErrorTemplate.ctorParameters = () => [
    { type: TemplateRef },
    { type: ViewContainerRef }
];
TdDynamicFormsErrorTemplate.propDecorators = {
    tdDynamicFormsError: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    TdDynamicFormsErrorTemplate.prototype.tdDynamicFormsError;
}
export class TdDynamicElementDirective {
    /**
     * @param {?} viewContainer
     */
    constructor(viewContainer) {
        this.viewContainer = viewContainer;
    }
}
TdDynamicElementDirective.decorators = [
    { type: Directive, args: [{
                selector: '[tdDynamicContainer]',
            },] }
];
/** @nocollapse */
TdDynamicElementDirective.ctorParameters = () => [
    { type: ViewContainerRef }
];
if (false) {
    /** @type {?} */
    TdDynamicElementDirective.prototype.viewContainer;
}
export class TdDynamicElementComponent extends _TdDynamicElementMixinBase {
    /**
     * @param {?} _componentFactoryResolver
     * @param {?} _dynamicFormsService
     * @param {?} _changeDetectorRef
     */
    constructor(_componentFactoryResolver, _dynamicFormsService, _changeDetectorRef) {
        super(_changeDetectorRef);
        this._componentFactoryResolver = _componentFactoryResolver;
        this._dynamicFormsService = _dynamicFormsService;
        /**
         * Sets label to be displayed.
         */
        this.label = '';
        /**
         * Sets hint to be displayed.
         */
        this.hint = '';
        /**
         * Sets name to be displayed as attribute.
         */
        this.name = '';
        /**
         * Sets type or element of element to be rendered.
         * Throws error if does not exist or no supported.
         */
        this.type = undefined;
        /**
         * Sets required validation checkup (if supported by element).
         */
        this.required = undefined;
        /**
         * Sets min validation checkup (if supported by element).
         */
        this.min = undefined;
        /**
         * Sets max validation checkup (if supported by element).
         */
        this.max = undefined;
        /**
         * Sets minLength validation checkup (if supported by element).
         */
        this.minLength = undefined;
        /**
         * Sets maxLength validation checkup (if supported by element).
         */
        this.maxLength = undefined;
        /**
         * Sets selections for array elements (if supported by element).
         */
        this.selections = undefined;
        /**
         * Sets multiple property for array elements (if supported by element).
         */
        this.multiple = undefined;
        /**
         * Sets error message template so it can be injected into dynamic components.
         */
        this.errorMessageTemplate = undefined;
    }
    /**
     * @return {?}
     */
    get maxAttr() {
        return this.max;
    }
    /**
     * @return {?}
     */
    get minAttr() {
        return this.min;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        let component = (/** @type {?} */ (this.type)) instanceof Type ? this.type : this._dynamicFormsService.getDynamicElement(this.type);
        /** @type {?} */
        let ref = this._componentFactoryResolver.
            resolveComponentFactory(component)
            .create(this.childElement.viewContainer.injector);
        this.childElement.viewContainer.insert(ref.hostView);
        this._instance = ref.instance;
        this._instance.control = this.dynamicControl;
        this._instance.label = this.label;
        this._instance.hint = this.hint;
        this._instance.name = this.name;
        this._instance.type = this.type;
        this._instance.value = this.value;
        this._instance.required = this.required;
        this._instance.min = this.min;
        this._instance.max = this.max;
        this._instance.minLength = this.minLength;
        this._instance.maxLength = this.maxLength;
        this._instance.selections = this.selections;
        this._instance.multiple = this.multiple;
        this._instance.errorMessageTemplate = this.errorMessageTemplate;
    }
    /**
     * Reassign any inputs that have changed
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (this._instance) {
            for (let prop in changes) {
                this._instance[prop] = changes[prop].currentValue;
            }
        }
    }
}
TdDynamicElementComponent.decorators = [
    { type: Component, args: [{
                providers: [TdDynamicFormsService, {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(() => TdDynamicElementComponent),
                        multi: true,
                    }],
                selector: 'td-dynamic-element',
                template: '<div tdDynamicContainer></div>'
            }] }
];
/** @nocollapse */
TdDynamicElementComponent.ctorParameters = () => [
    { type: ComponentFactoryResolver },
    { type: TdDynamicFormsService },
    { type: ChangeDetectorRef }
];
TdDynamicElementComponent.propDecorators = {
    dynamicControl: [{ type: Input }],
    label: [{ type: Input }],
    hint: [{ type: Input }],
    name: [{ type: Input }],
    type: [{ type: Input }],
    required: [{ type: Input }],
    min: [{ type: Input }],
    max: [{ type: Input }],
    minLength: [{ type: Input }],
    maxLength: [{ type: Input }],
    selections: [{ type: Input }],
    multiple: [{ type: Input }],
    errorMessageTemplate: [{ type: Input }],
    childElement: [{ type: ViewChild, args: [TdDynamicElementDirective,] }],
    maxAttr: [{ type: HostBinding, args: ['attr.max',] }],
    minAttr: [{ type: HostBinding, args: ['attr.min',] }]
};
if (false) {
    /** @type {?} */
    TdDynamicElementComponent.prototype._instance;
    /**
     * Sets form control of the element.
     * @type {?}
     */
    TdDynamicElementComponent.prototype.dynamicControl;
    /**
     * Sets label to be displayed.
     * @type {?}
     */
    TdDynamicElementComponent.prototype.label;
    /**
     * Sets hint to be displayed.
     * @type {?}
     */
    TdDynamicElementComponent.prototype.hint;
    /**
     * Sets name to be displayed as attribute.
     * @type {?}
     */
    TdDynamicElementComponent.prototype.name;
    /**
     * Sets type or element of element to be rendered.
     * Throws error if does not exist or no supported.
     * @type {?}
     */
    TdDynamicElementComponent.prototype.type;
    /**
     * Sets required validation checkup (if supported by element).
     * @type {?}
     */
    TdDynamicElementComponent.prototype.required;
    /**
     * Sets min validation checkup (if supported by element).
     * @type {?}
     */
    TdDynamicElementComponent.prototype.min;
    /**
     * Sets max validation checkup (if supported by element).
     * @type {?}
     */
    TdDynamicElementComponent.prototype.max;
    /**
     * Sets minLength validation checkup (if supported by element).
     * @type {?}
     */
    TdDynamicElementComponent.prototype.minLength;
    /**
     * Sets maxLength validation checkup (if supported by element).
     * @type {?}
     */
    TdDynamicElementComponent.prototype.maxLength;
    /**
     * Sets selections for array elements (if supported by element).
     * @type {?}
     */
    TdDynamicElementComponent.prototype.selections;
    /**
     * Sets multiple property for array elements (if supported by element).
     * @type {?}
     */
    TdDynamicElementComponent.prototype.multiple;
    /**
     * Sets error message template so it can be injected into dynamic components.
     * @type {?}
     */
    TdDynamicElementComponent.prototype.errorMessageTemplate;
    /** @type {?} */
    TdDynamicElementComponent.prototype.childElement;
    /** @type {?} */
    TdDynamicElementComponent.prototype._componentFactoryResolver;
    /** @type {?} */
    TdDynamicElementComponent.prototype._dynamicFormsService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pYy1lbGVtZW50LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bjb3ZhbGVudC9keW5hbWljLWZvcm1zLyIsInNvdXJjZXMiOlsiZHluYW1pYy1lbGVtZW50LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBb0MsV0FBVyxFQUFFLGlCQUFpQixFQUFFLElBQUksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqSixPQUFPLEVBQUUsU0FBUyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVELE9BQU8sRUFBRSx3QkFBd0IsRUFBZ0IsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25GLE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDdEYsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFOUQsT0FBTyxFQUFFLHlCQUF5QixFQUF5QixNQUFNLHVCQUF1QixDQUFDO0FBRXpGLE9BQU8sRUFBbUMscUJBQXFCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUUxRyxNQUFNLE9BQU8sb0JBQW9COzs7O0lBQy9CLFlBQW1CLGtCQUFxQztRQUFyQyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW1CO0lBQUcsQ0FBQztDQUM3RDs7O0lBRGEsa0RBQTRDOzs7O0FBSTFELE1BQU0sT0FBTywwQkFBMEIsR0FBRyx5QkFBeUIsQ0FBQyxvQkFBb0IsQ0FBQztBQUd6RixNQUFNLE9BQU8sMkJBQTRCLFNBQVEsdUJBQXVCOzs7OztJQUd0RSxZQUFZLFdBQTZCLEVBQUUsZ0JBQWtDO1FBQzNFLEtBQUssQ0FBQyxXQUFXLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUN2QyxDQUFDOzs7WUFORixTQUFTLFNBQUMsRUFBQyxRQUFRLEVBQUUsa0NBQWtDLEVBQUM7Ozs7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QjtzQkFFbkMsV0FBVyxTQUFDLFVBQVU7c0JBS3RCLFdBQVcsU0FBQyxVQUFVOzs7O0lBM0V2Qiw4Q0FBdUI7Ozs7O0lBS3ZCLG1EQUFxQzs7Ozs7SUFLckMsMENBQTRCOzs7OztJQUs1Qix5Q0FBMkI7Ozs7O0lBSzNCLHlDQUEyQjs7Ozs7O0lBTTNCLHlDQUE0RDs7Ozs7SUFLNUQsNkNBQXVDOzs7OztJQUt2Qyx3Q0FBaUM7Ozs7O0lBS2pDLHdDQUFpQzs7Ozs7SUFLakMsOENBQXVDOzs7OztJQUt2Qyw4Q0FBdUM7Ozs7O0lBS3ZDLCtDQUF1Qzs7Ozs7SUFLdkMsNkNBQXVDOzs7OztJQUt2Qyx5REFBNEQ7O0lBRTVELGlEQUE4RTs7SUFZbEUsOERBQTJEOztJQUMzRCx5REFBbUQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIERpcmVjdGl2ZSwgSW5wdXQsIEhvc3RCaW5kaW5nLCBPbkluaXQsIFNpbXBsZUNoYW5nZXMsIE9uQ2hhbmdlcywgVGVtcGxhdGVSZWYsIENoYW5nZURldGVjdG9yUmVmLCBUeXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBWaWV3Q2hpbGQsIFZpZXdDb250YWluZXJSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgQ29tcG9uZW50UmVmLCBmb3J3YXJkUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IsIEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgVGVtcGxhdGVQb3J0YWxEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9jZGsvcG9ydGFsJztcblxuaW1wb3J0IHsgbWl4aW5Db250cm9sVmFsdWVBY2Nlc3NvciwgSUNvbnRyb2xWYWx1ZUFjY2Vzc29yIH0gZnJvbSAnQGNvdmFsZW50L2NvcmUvY29tbW9uJztcblxuaW1wb3J0IHsgVGREeW5hbWljRWxlbWVudCwgVGREeW5hbWljVHlwZSwgVGREeW5hbWljRm9ybXNTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9keW5hbWljLWZvcm1zLnNlcnZpY2UnO1xuXG5leHBvcnQgY2xhc3MgVGREeW5hbWljRWxlbWVudEJhc2Uge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgX2NoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZikge31cbn1cblxuLyogdHNsaW50OmRpc2FibGUtbmV4dC1saW5lICovXG5leHBvcnQgY29uc3QgX1RkRHluYW1pY0VsZW1lbnRNaXhpbkJhc2UgPSBtaXhpbkNvbnRyb2xWYWx1ZUFjY2Vzc29yKFRkRHluYW1pY0VsZW1lbnRCYXNlKTtcblxuQERpcmVjdGl2ZSh7c2VsZWN0b3I6ICdbdGREeW5hbWljRm9ybXNFcnJvcl1uZy10ZW1wbGF0ZSd9KVxuZXhwb3J0IGNsYXNzIFRkRHluYW1pY0Zvcm1zRXJyb3JUZW1wbGF0ZSBleHRlbmRzIFRlbXBsYXRlUG9ydGFsRGlyZWN0aXZlIHtcblxuICBASW5wdXQoKSB0ZER5bmFtaWNGb3Jtc0Vycm9yOiBzdHJpbmc7XG4gIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxhbnk+LCB2aWV3Q29udGFpbmVyUmVmOiBWaWV3Q29udGFpbmVyUmVmKSB7XG4gICAgc3VwZXIodGVtcGxhdGVSZWYsIHZpZXdDb250YWluZXJSZWYpO1xuICB9XG59XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1t0ZER5bmFtaWNDb250YWluZXJdJyxcbn0pXG5leHBvcnQgY2xhc3MgVGREeW5hbWljRWxlbWVudERpcmVjdGl2ZSB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB2aWV3Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmKSB7IH1cbn1cblxuQENvbXBvbmVudCh7XG4gIHByb3ZpZGVyczogW1RkRHluYW1pY0Zvcm1zU2VydmljZSwge1xuICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFRkRHluYW1pY0VsZW1lbnRDb21wb25lbnQpLFxuICAgIG11bHRpOiB0cnVlLFxuICB9XSxcbiAgc2VsZWN0b3I6ICd0ZC1keW5hbWljLWVsZW1lbnQnLFxuICB0ZW1wbGF0ZTogJzxkaXYgdGREeW5hbWljQ29udGFpbmVyPjwvZGl2PicsXG59KVxuZXhwb3J0IGNsYXNzIFRkRHluYW1pY0VsZW1lbnRDb21wb25lbnQgZXh0ZW5kcyBfVGREeW5hbWljRWxlbWVudE1peGluQmFzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wbGVtZW50cyBJQ29udHJvbFZhbHVlQWNjZXNzb3IsIE9uSW5pdCwgT25DaGFuZ2VzIHtcblxuICBwcml2YXRlIF9pbnN0YW5jZTogYW55O1xuXG4gIC8qKlxuICAgKiBTZXRzIGZvcm0gY29udHJvbCBvZiB0aGUgZWxlbWVudC5cbiAgICovXG4gIEBJbnB1dCgpIGR5bmFtaWNDb250cm9sOiBGb3JtQ29udHJvbDtcblxuICAvKipcbiAgICogU2V0cyBsYWJlbCB0byBiZSBkaXNwbGF5ZWQuXG4gICAqL1xuICBASW5wdXQoKSBsYWJlbDogc3RyaW5nID0gJyc7XG5cbiAgLyoqXG4gICAqIFNldHMgaGludCB0byBiZSBkaXNwbGF5ZWQuXG4gICAqL1xuICBASW5wdXQoKSBoaW50OiBzdHJpbmcgPSAnJztcblxuICAvKipcbiAgICogU2V0cyBuYW1lIHRvIGJlIGRpc3BsYXllZCBhcyBhdHRyaWJ1dGUuXG4gICAqL1xuICBASW5wdXQoKSBuYW1lOiBzdHJpbmcgPSAnJztcblxuICAvKipcbiAgICogU2V0cyB0eXBlIG9yIGVsZW1lbnQgb2YgZWxlbWVudCB0byBiZSByZW5kZXJlZC5cbiAgICogVGhyb3dzIGVycm9yIGlmIGRvZXMgbm90IGV4aXN0IG9yIG5vIHN1cHBvcnRlZC5cbiAgICovXG4gIEBJbnB1dCgpIHR5cGU6IFRkRHluYW1pY0VsZW1lbnQgfCBUZER5bmFtaWNUeXBlID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBTZXRzIHJlcXVpcmVkIHZhbGlkYXRpb24gY2hlY2t1cCAoaWYgc3VwcG9ydGVkIGJ5IGVsZW1lbnQpLlxuICAgKi9cbiAgQElucHV0KCkgcmVxdWlyZWQ6IGJvb2xlYW4gPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFNldHMgbWluIHZhbGlkYXRpb24gY2hlY2t1cCAoaWYgc3VwcG9ydGVkIGJ5IGVsZW1lbnQpLlxuICAgKi9cbiAgQElucHV0KCkgbWluOiBudW1iZXIgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFNldHMgbWF4IHZhbGlkYXRpb24gY2hlY2t1cCAoaWYgc3VwcG9ydGVkIGJ5IGVsZW1lbnQpLlxuICAgKi9cbiAgQElucHV0KCkgbWF4OiBudW1iZXIgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFNldHMgbWluTGVuZ3RoIHZhbGlkYXRpb24gY2hlY2t1cCAoaWYgc3VwcG9ydGVkIGJ5IGVsZW1lbnQpLlxuICAgKi9cbiAgQElucHV0KCkgbWluTGVuZ3RoOiBudW1iZXIgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFNldHMgbWF4TGVuZ3RoIHZhbGlkYXRpb24gY2hlY2t1cCAoaWYgc3VwcG9ydGVkIGJ5IGVsZW1lbnQpLlxuICAgKi9cbiAgQElucHV0KCkgbWF4TGVuZ3RoOiBudW1iZXIgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFNldHMgc2VsZWN0aW9ucyBmb3IgYXJyYXkgZWxlbWVudHMgKGlmIHN1cHBvcnRlZCBieSBlbGVtZW50KS5cbiAgICovXG4gIEBJbnB1dCgpIHNlbGVjdGlvbnM6IGFueVtdID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBTZXRzIG11bHRpcGxlIHByb3BlcnR5IGZvciBhcnJheSBlbGVtZW50cyAoaWYgc3VwcG9ydGVkIGJ5IGVsZW1lbnQpLlxuICAgKi9cbiAgQElucHV0KCkgbXVsdGlwbGU6IGJvb2xlYW4gPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFNldHMgZXJyb3IgbWVzc2FnZSB0ZW1wbGF0ZSBzbyBpdCBjYW4gYmUgaW5qZWN0ZWQgaW50byBkeW5hbWljIGNvbXBvbmVudHMuXG4gICAqL1xuICBASW5wdXQoKSBlcnJvck1lc3NhZ2VUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PiA9IHVuZGVmaW5lZDtcblxuICBAVmlld0NoaWxkKFRkRHluYW1pY0VsZW1lbnREaXJlY3RpdmUpIGNoaWxkRWxlbWVudDogVGREeW5hbWljRWxlbWVudERpcmVjdGl2ZTtcblxuICBASG9zdEJpbmRpbmcoJ2F0dHIubWF4JylcbiAgZ2V0IG1heEF0dHIoKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5tYXg7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2F0dHIubWluJylcbiAgZ2V0IG1pbkF0dHIoKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5taW47XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICAgICAgICAgICAgcHJpdmF0ZSBfZHluYW1pY0Zvcm1zU2VydmljZTogVGREeW5hbWljRm9ybXNTZXJ2aWNlLFxuICAgICAgICAgICAgICBfY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gICAgc3VwZXIoX2NoYW5nZURldGVjdG9yUmVmKTtcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGxldCBjb21wb25lbnQ6IGFueSA9IDxhbnk+dGhpcy50eXBlIGluc3RhbmNlb2YgVHlwZSA/IHRoaXMudHlwZSA6IHRoaXMuX2R5bmFtaWNGb3Jtc1NlcnZpY2UuZ2V0RHluYW1pY0VsZW1lbnQodGhpcy50eXBlKTtcbiAgICBsZXQgcmVmOiBDb21wb25lbnRSZWY8YW55PiA9IHRoaXMuX2NvbXBvbmVudEZhY3RvcnlSZXNvbHZlci5cbiAgICAgIHJlc29sdmVDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudClcbiAgICAgIC5jcmVhdGUodGhpcy5jaGlsZEVsZW1lbnQudmlld0NvbnRhaW5lci5pbmplY3Rvcik7XG4gICAgdGhpcy5jaGlsZEVsZW1lbnQudmlld0NvbnRhaW5lci5pbnNlcnQocmVmLmhvc3RWaWV3KTtcbiAgICB0aGlzLl9pbnN0YW5jZSA9IHJlZi5pbnN0YW5jZTtcbiAgICB0aGlzLl9pbnN0YW5jZS5jb250cm9sID0gdGhpcy5keW5hbWljQ29udHJvbDtcbiAgICB0aGlzLl9pbnN0YW5jZS5sYWJlbCA9IHRoaXMubGFiZWw7XG4gICAgdGhpcy5faW5zdGFuY2UuaGludCA9IHRoaXMuaGludDtcbiAgICB0aGlzLl9pbnN0YW5jZS5uYW1lID0gdGhpcy5uYW1lO1xuICAgIHRoaXMuX2luc3RhbmNlLnR5cGUgPSB0aGlzLnR5cGU7XG4gICAgdGhpcy5faW5zdGFuY2UudmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgIHRoaXMuX2luc3RhbmNlLnJlcXVpcmVkID0gdGhpcy5yZXF1aXJlZDtcbiAgICB0aGlzLl9pbnN0YW5jZS5taW4gPSB0aGlzLm1pbjtcbiAgICB0aGlzLl9pbnN0YW5jZS5tYXggPSB0aGlzLm1heDtcbiAgICB0aGlzLl9pbnN0YW5jZS5taW5MZW5ndGggPSB0aGlzLm1pbkxlbmd0aDtcbiAgICB0aGlzLl9pbnN0YW5jZS5tYXhMZW5ndGggPSB0aGlzLm1heExlbmd0aDtcbiAgICB0aGlzLl9pbnN0YW5jZS5zZWxlY3Rpb25zID0gdGhpcy5zZWxlY3Rpb25zO1xuICAgIHRoaXMuX2luc3RhbmNlLm11bHRpcGxlID0gdGhpcy5tdWx0aXBsZTtcbiAgICB0aGlzLl9pbnN0YW5jZS5lcnJvck1lc3NhZ2VUZW1wbGF0ZSA9IHRoaXMuZXJyb3JNZXNzYWdlVGVtcGxhdGU7XG4gIH1cblxuICAvKipcbiAgICogUmVhc3NpZ24gYW55IGlucHV0cyB0aGF0IGhhdmUgY2hhbmdlZFxuICAgKi9cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgZm9yIChsZXQgcHJvcCBpbiBjaGFuZ2VzKSB7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlW3Byb3BdID0gY2hhbmdlc1twcm9wXS5jdXJyZW50VmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0=