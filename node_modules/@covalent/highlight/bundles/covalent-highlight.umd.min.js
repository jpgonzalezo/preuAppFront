!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/platform-browser"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@covalent/highlight",["exports","@angular/platform-browser","@angular/core","@angular/common"],t):t((e.covalent=e.covalent||{},e.covalent.highlight={}),e.ng.platformBrowser,e.ng.core,e.ng.common)}(this,function(e,t,o,n){"use strict";var a=require("highlight.js/lib"),r=function(){function e(e,t,n){this._renderer=e,this._elementRef=t,this._domSanitizer=n,this._initialized=!1,this.language="typescript",this.onContentReady=new o.EventEmitter}return Object.defineProperty(e.prototype,"content",{set:function(e){this._content=e,this._initialized&&this._loadContent(this._content)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){if(!this.language)throw new Error("Error: language attribute must be defined in TdHighlightComponent.");this._content?this._loadContent(this._content):this._loadContent(this._elementRef.nativeElement.textContent),this._initialized=!0},e.prototype._loadContent=function(e){if(e&&0<e.trim().length){this._renderer.setProperty(this._elementRef.nativeElement,"innerHTML","");this._elementFromString(this._render(e))}this.onContentReady.emit()},e.prototype._elementFromString=function(e){var t=this._renderer.createElement("pre");this._renderer.appendChild(this._elementRef.nativeElement,t);var n=this._renderer.createElement("code");return this._renderer.appendChild(t,n),this._renderer.addClass(n,"highlight"),n.innerHTML=this._domSanitizer.sanitize(o.SecurityContext.HTML,e),t},e.prototype._render=function(e){var t=(e=e.replace(/^(\s|\t)*\n+/g,"").replace(/(\s|\t)*\n+(\s|\t)*$/g,"")).split("\n"),n=t[0].match(/^(\s|\t)*/)[0],o=new RegExp("^"+n),r=(t=t.map(function(e){return e.replace('=""',"").replace(o,"").replace(/\s+$/,"")})).join("\n").replace(/\{ \{/gi,"{{").replace(/\} \}/gi,"}}").replace(/&lt;/gi,"<").replace(/&gt;/gi,">"),i=a.highlight(this.language,r,!0);return i.value=i.value.replace(/=<span class="hljs-value">""<\/span>/gi,"").replace("<head>","").replace("<head/>",""),i.value},e.decorators=[{type:o.Component,args:[{selector:"td-highlight",template:"<ng-content></ng-content>",styles:[':host ::ng-deep{display:block;overflow-x:auto;padding:16px}:host ::ng-deep .highlight,:host ::ng-deep code,:host ::ng-deep pre{font-family:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace}:host ::ng-deep pre{display:block;overflow-x:auto;padding:0;margin:0;background:0 0;font-family:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace;line-height:1.45;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-font-smoothing:auto;-webkit-text-size-adjust:none;position:relative;border-radius:2px;font-size:.8rem}:host ::ng-deep code{margin:0;padding:0;overflow-wrap:break-word;white-space:pre-wrap}:host ::ng-deep .highlight{display:block;overflow-wrap:break-word;line-height:1.5;margin:0}']}]}],e.ctorParameters=function(){return[{type:o.Renderer2},{type:o.ElementRef},{type:t.DomSanitizer}]},e.propDecorators={content:[{type:o.Input,args:["content"]}],language:[{type:o.Input,args:["lang"]}],onContentReady:[{type:o.Output,args:["contentReady"]}]},e}(),i=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[n.CommonModule],declarations:[r],exports:[r]}]}],e}();e.TdHighlightComponent=r,e.CovalentHighlightModule=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=covalent-highlight.umd.min.js.map